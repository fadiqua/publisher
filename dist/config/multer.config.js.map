{"version":3,"sources":["../../server/config/multer.config.js"],"names":["storage","diskStorage","destination","req","file","cb","filename","Date","valueOf","Math","random","extname","originalname","fileFilter","match","Error","upload"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA;AACA,IAAMA,UAAU,iBAAOC,WAAP,CAAmB;AAC/BC,iBAAa,qBAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAmB;AAC5BA,WAAG,IAAH,EAAS,OAAT;AACH,KAH8B;AAI/BC,YAJ+B,oBAItBH,GAJsB,EAIjBC,IAJiB,EAIXC,EAJW,EAIP;AACpBA,WAAG,IAAH,EAAa,IAAIE,IAAJ,EAAD,CAAWC,OAAX,EAAZ,SAAoCC,KAAKC,MAAL,KAAc,KAAlD,GAA0D,eAAKC,OAAL,CAAaP,KAAKQ,YAAlB,CAA1D;AACH,KAN8B;AAO/BC,cAP+B,sBAOpBV,GAPoB,EAOfC,IAPe,EAOTC,EAPS,EAON;AACrB,YAAI,CAACD,KAAKQ,YAAL,CAAkBE,KAAlB,CAAwB,uBAAxB,CAAL,EAAuD;AACnD,mBAAOT,GAAG,IAAIU,KAAJ,CAAU,+BAAV,CAAH,EAA+C,KAA/C,CAAP;AACH;AACDV,WAAG,IAAH,EAAS,IAAT;AACH;AAZ8B,CAAnB,CAAhB;AAcA,IAAMW,SAAS,sBAAO,EAAEhB,gBAAF,EAAP,CAAf;;kBAEegB,M","file":"multer.config.js","sourcesContent":["import multer from 'multer';\nimport path from 'path';\n\n// multer config\nconst storage = multer.diskStorage({\n    destination: (req, file, cb) => {\n        cb(null, 'files')\n    },\n    filename(req, file, cb) {\n        cb(null, `${(new Date).valueOf()}-${Math.random()*99999}${path.extname(file.originalname)}`);\n    },\n    fileFilter(req, file, cb){\n        if (!file.originalname.match(/\\.(jpg|jpeg|png|gif)$/)) {\n            return cb(new Error('Only image files are allowed!'), false);\n        }\n        cb(null, true);\n    }\n});\nconst upload = multer({ storage });\n\nexport default upload;"]}