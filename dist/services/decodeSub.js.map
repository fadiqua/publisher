{"version":3,"sources":["../../server/services/decodeSub.js"],"names":["decodeSub","req","res","next","token","headers","decoded","verify","jwtSecret","id","sub","user","e"],"mappings":";;;;;QAGiBA,S,GAAAA,S;;AAHjB;;;;AACA;;;;;;AAEQ,SAASA,SAAT,CAAmBC,GAAnB,EAAwBC,GAAxB,EAA6BC,IAA7B,EAAmC;AACvC,QAAI;AACA,YAAMC,QAAQH,IAAII,OAAJ,CAAY,eAAZ,CAAd;AACA,YAAMC,UAAU,uBAAIC,MAAJ,CAAWH,KAAX,EAAkB,iBAAOI,SAAzB,CAAhB;AACAF,gBAAQG,EAAR,GAAaH,QAAQI,GAArB;AACA,eAAOJ,QAAQI,GAAf;AACAT,YAAIU,IAAJ,GAAWL,OAAX;AACAH;AACH,KAPD,CAOE,OAAOS,CAAP,EAAS;AACPX,YAAIU,IAAJ,GAAW,IAAX;AACAR;AACH;AAEJ","file":"decodeSub.js","sourcesContent":["import jwt from 'jsonwebtoken';\nimport config from '../config/config';\n\nexport  function decodeSub(req, res, next) {\n    try {\n        const token = req.headers['authorization'];\n        const decoded = jwt.verify(token, config.jwtSecret);\n        decoded.id = decoded.sub;\n        delete decoded.sub;\n        req.user = decoded;\n        next()\n    } catch (e){\n        req.user = null;\n        next()\n    }\n\n}"]}