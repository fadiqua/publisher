{"version":3,"sources":["../server/app.js"],"names":["require","config","app","use","json","limit","urlencoded","extended","initialize","static","process","env","NODE_ENV","resolve","__dirname","get","req","res","sendFile"],"mappings":";;;;;;AAGA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEAA,QAAQ,QAAR,EAAkBC,MAAlB,G,CAXA;;;;;AAaA,IAAMC,MAAM,wBAAZ;;AAEAA,IAAIC,GAAJ,CAAQ,sBAAO,2HAAP,CAAR;;AAEA;AACAD,IAAIC,GAAJ,CAAQ,qBAAWC,IAAX,CAAgB,EAAEC,OAAO,MAAT,EAAhB,CAAR;AACAH,IAAIC,GAAJ,CAAQ,qBAAWG,UAAX,CAAsB,EAAEC,UAAU,IAAZ,EAAkBF,OAAO,MAAzB,EAAtB,CAAR;;AAEA;AACAH,IAAIC,GAAJ,CAAQ,mBAASK,UAAT,EAAR;AACA,mBAASL,GAAT;AACA,mBAASA,GAAT;AACAD,IAAIC,GAAJ;;AAEA;AACAD,IAAIC,GAAJ,CAAQ,QAAR,EAAkB,kBAAQM,MAAR,CAAe,OAAf,CAAlB;AACA;AACAP,IAAIC,GAAJ,CAAQ,MAAR;AACA;AACA,IAAGO,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAA5B,EAAyC;AACrCV,QAAIC,GAAJ,CAAQ,kBAAQM,MAAR,CAAe,eAAKI,OAAL,CAAaC,SAAb,EAAwB,IAAxB,EAA6B,OAA7B,CAAf,CAAR;AACAZ,QAAIC,GAAJ,CAAQ,QAAR,EAAkB,kBAAQM,MAAR,CAAe,OAAf,CAAlB;AACH;AACD,IAAGC,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAA5B,EAAyC;AACrCV,QAAIa,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACvBA,YAAIC,QAAJ,CAAa,eAAKL,OAAL,CAAaC,SAAb,EAAwB,IAAxB,EAA6B,OAA7B,EAAqC,YAArC,CAAb;AACH,KAFD;AAGH;;kBAEcZ,G","file":"app.js","sourcesContent":["/**\n * Created by fadiqua on 28/05/17.\n */\nimport path from 'path';\nimport express from 'express';\nimport morgan from 'morgan';\nimport bodyParser from 'body-parser';\nimport passport from 'passport';\nimport routes from './routes/index';\nimport { localLogin, jwtLogin, decodeSub } from './services';\n\nrequire('dotenv').config();\n\nconst app = express();\n\napp.use(morgan(':remote-addr - :remote-user [:date[clf]] \":method :url HTTP/:http-version\" :status :res[content-length] :response-time ms'));\n\n// body parser\napp.use(bodyParser.json({ limit: '50mb' }));\napp.use(bodyParser.urlencoded({ extended: true, limit: '50mb' }));\n\n// passport config\napp.use(passport.initialize());\npassport.use(localLogin);\npassport.use(jwtLogin);\napp.use(decodeSub);\n\n// static files\napp.use('/media', express.static('files'));\n// api\napp.use('/api', routes);\n// process.env.NODE_ENV = 'production'\nif(process.env.NODE_ENV === 'production'){\n    app.use(express.static(path.resolve(__dirname, '..','build')));\n    app.use('/media', express.static('files'));\n}\nif(process.env.NODE_ENV === 'production'){\n    app.get('*', (req, res) => {\n        res.sendFile(path.resolve(__dirname, '..','build','index.html'));\n    });\n}\n\nexport default app;"]}