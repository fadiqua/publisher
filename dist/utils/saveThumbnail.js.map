{"version":3,"sources":["../../server/utils/saveThumbnail.js"],"names":["gM","subClass","imageMagick","saveThumbnail","file","thumbName","Date","valueOf","Math","random","extname","originalname","Promise","resolve","reject","path","resize","noProfile","gravity","extent","write","err"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAMA,KAAK,aAAGC,QAAH,CAAY,EAACC,aAAa,IAAd,EAAZ,CAAX;;AAEA,IAAMC,gBAAgB,SAAhBA,aAAgB,CAACC,IAAD,EAAU;AAC5B,QAAMC,0BAAyB,IAAIC,IAAJ,EAAD,CAAWC,OAAX,EAAxB,SAAgDC,KAAKC,MAAL,KAAc,KAA9D,GAAsE,eAAKC,OAAL,CAAaN,KAAKO,YAAlB,CAA5E;AACA,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCd,WAAGI,KAAKW,IAAR,EACKC,MADL,CACY,EADZ,EACe,EADf,EACkB,GADlB,EAEKC,SAFL,GAGKC,OAHL,CAGa,QAHb,EAIKC,MAJL,CAIY,EAJZ,EAIe,EAJf,EAKKC,KALL,qBAK6Bf,SAL7B,EAK0C,UAAUgB,GAAV,EAAe;AACjD,gBAAG,CAACA,GAAJ,EAAQ;AACJR,wBAAQR,SAAR;AACH;AACDS,mBAAOO,GAAP;AACH,SAVL;AAWH,KAZM,CAAP;AAaH,CAfD;;kBAiBelB,a","file":"saveThumbnail.js","sourcesContent":["import gm from 'gm';\nimport path from 'path';\n\nconst gM = gm.subClass({imageMagick: true});\n\nconst saveThumbnail = (file) => {\n    const thumbName = `thumb-80-${(new Date).valueOf()}-${Math.random()*99999}${path.extname(file.originalname)}`;\n    return new Promise((resolve, reject) => {\n        gM(file.path)\n            .resize(50,50,'^')\n            .noProfile()\n            .gravity('center')\n            .extent(50,50)\n            .write(`./files/thumbs/${thumbName}`, function (err) {\n                if(!err){\n                    resolve(thumbName)\n                }\n                reject(err)\n            });\n    });\n};\n\nexport default saveThumbnail;"]}